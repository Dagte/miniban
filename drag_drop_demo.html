<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Drag-and-Drop Demo for Miniban</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background-color: #f5f5f5;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .demo-container {
            background-color: white;
            border-radius: 8px;
            padding: 30px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }
        
        .section {
            margin-bottom: 30px;
        }
        
        .section h2 {
            color: #2c3e50;
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
            margin-bottom: 15px;
        }
        
        .code-block {
            background-color: #f8f9fa;
            border: 1px solid #e1e4e8;
            border-radius: 6px;
            padding: 15px;
            font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
            font-size: 14px;
            overflow-x: auto;
            margin: 15px 0;
        }
        
        .feature-list {
            list-style-type: none;
            padding-left: 0;
        }
        
        .feature-list li {
            padding: 8px 0;
            position: relative;
            padding-left: 25px;
        }
        
        .feature-list li:before {
            content: "âœ“";
            color: #2ecc71;
            font-weight: bold;
            position: absolute;
            left: 0;
        }
        
        .visual-demo {
            display: flex;
            gap: 20px;
            margin: 20px 0;
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
        }
        
        .demo-column {
            flex: 1;
            min-width: 200px;
            background-color: white;
            border: 2px solid #e1e4e8;
            border-radius: 6px;
            padding: 15px;
        }
        
        .demo-column-header {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 10px;
            color: #2c3e50;
            text-align: center;
        }
        
        .demo-task {
            background-color: #f8f9fa;
            border: 1px solid #e1e4e8;
            border-radius: 4px;
            padding: 10px;
            margin-bottom: 10px;
            cursor: move;
            transition: all 0.2s ease;
        }
        
        .demo-task:hover {
            background-color: #e3f2fd;
            border-color: #2196F3;
        }
        
        .demo-task.dragging {
            opacity: 0.5;
            background-color: #e3f2fd;
            border: 2px dashed #2196F3;
        }
        
        .demo-column.drag-over {
            background-color: #e3f2fd;
            border: 2px solid #2196F3;
        }
        
        .instructions {
            background-color: #e8f5e9;
            border-left: 4px solid #2e7d32;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }
        
        .instructions h3 {
            color: #2e7d32;
            margin-top: 0;
        }
        
        .browser-mock {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            overflow: hidden;
            margin: 30px 0;
        }
        
        .browser-header {
            background-color: #f0f0f0;
            padding: 10px 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .browser-dots {
            display: flex;
            gap: 6px;
        }
        
        .browser-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }
        
        .browser-dot.red { background-color: #ff5f56; }
        .browser-dot.yellow { background-color: #ffbd2e; }
        .browser-dot.green { background-color: #27ca3f; }
        
        .browser-url {
            flex: 1;
            background-color: white;
            border-radius: 4px;
            padding: 6px 12px;
            font-size: 12px;
            color: #666;
        }
        
        .browser-content {
            padding: 20px;
        }
    </style>
</head>
<body>
    <h1>ðŸŽ¯ Miniban Drag-and-Drop Implementation</h1>
    
    <div class="demo-container">
        <div class="section">
            <h2>âœ¨ Features Implemented</h2>
            <ul class="feature-list">
                <li>HTML5 Drag-and-Drop API integration</li>
                <li>Visual feedback during drag operations (opacity changes, border highlights)</li>
                <li>Automatic status updates when tasks are dropped in new columns</li>
                <li>Backend API integration for real-time status updates</li>
                <li>Error handling and user feedback</li>
                <li>Responsive design that works on all screen sizes</li>
            </ul>
        </div>
        
        <div class="section">
            <h2>ðŸ“‹ How It Works</h2>
            
            <div class="instructions">
                <h3>User Flow:</h3>
                <ol>
                    <li><strong>Drag:</strong> Click and hold on any task card</li>
                    <li><strong>Move:</strong> Drag the task to the desired column</li>
                    <li><strong>Drop:</strong> Release the mouse button to drop the task</li>
                    <li><strong>Update:</strong> The task status is automatically updated in the backend</li>
                    <li><strong>Refresh:</strong> The board refreshes to show the task in its new column</li>
                </ol>
            </div>
        </div>
        
        <div class="section">
            <h2>ðŸŽ¨ Visual Demo</h2>
            
            <div class="browser-mock">
                <div class="browser-header">
                    <div class="browser-dots">
                        <div class="browser-dot red"></div>
                        <div class="browser-dot yellow"></div>
                        <div class="browser-dot green"></div>
                    </div>
                    <div class="browser-url">http://localhost:5001/kanban</div>
                </div>
                <div class="browser-content">
                    <div class="visual-demo">
                        <div class="demo-column" id="demo-todo">
                            <div class="demo-column-header">To Do</div>
                            <div class="demo-task" draggable="true">
                                <strong>Implement API</strong>
                                <div style="font-size: 12px; color: #666; margin-top: 5px;">
                                    Create REST endpoints for task management
                                </div>
                            </div>
                            <div class="demo-task" draggable="true">
                                <strong>Design UI</strong>
                                <div style="font-size: 12px; color: #666; margin-top: 5px;">
                                    Create responsive kanban board layout
                                </div>
                            </div>
                        </div>
                        
                        <div class="demo-column" id="demo-in-progress">
                            <div class="demo-column-header">In Progress</div>
                            <div class="demo-task" draggable="true">
                                <strong>Write Tests</strong>
                                <div style="font-size: 12px; color: #666; margin-top: 5px;">
                                    Implement unit and integration tests
                                </div>
                            </div>
                        </div>
                        
                        <div class="demo-column" id="demo-done">
                            <div class="demo-column-header">Done</div>
                            <div class="demo-task" draggable="true">
                                <strong>Setup Project</strong>
                                <div style="font-size: 12px; color: #666; margin-top: 5px;">
                                    Initialize Flask app and dependencies
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <p style="text-align: center; color: #666; font-style: italic;">
                ðŸ’¡ Try dragging the tasks between columns! (This is a visual demo - the actual functionality is in the kanban.html file)
            </p>
        </div>
        
        <div class="section">
            <h2>ðŸ”§ Technical Implementation</h2>
            
            <h3>Key JavaScript Functions:</h3>
            
            <div class="code-block">
// Drag start - when user starts dragging a task
function dragStart(e, task) {
    draggedTask = task;
    e.target.classList.add('dragging');
    e.dataTransfer.setData('text/plain', task.id);
    e.dataTransfer.effectAllowed = 'move';
}

// Allow drop - when task is dragged over a column
function allowDrop(e) {
    e.preventDefault();
    e.dataTransfer.dropEffect = 'move';
    e.currentTarget.classList.add('drag-over'); // Visual feedback
}

// Drop task - when task is dropped in a new column
function dropTask(e, newStatus) {
    e.preventDefault();
    const taskId = e.dataTransfer.getData('text/plain');
    
    if (draggedTask.status !== newStatus) {
        updateTaskStatus(taskId, newStatus); // Update backend
    }
}

// Update task status via API
async function updateTaskStatus(taskId, newStatus) {
    const response = await fetch(`/tasks/${taskId}`, {
        method: 'PUT',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({status: newStatus})
    });
    
    if (response.ok) {
        await fetchAndDisplayTasks(); // Refresh UI
    }
}
            </div>
        </div>
        
        <div class="section">
            <h2>ðŸš€ Usage Instructions</h2>
            
            <ol>
                <li><strong>Start the Flask application:</strong><br>
                    <div class="code-block">python3 app.py</div>
                </li>
                <li><strong>Open the Kanban board:</strong><br>
                    <div class="code-block">http://localhost:5001/kanban</div>
                </li>
                <li><strong>Drag and drop tasks:</strong><br>
                    Click on any task card, drag it to a different column, and release to update its status.
                </li>
                <li><strong>Verify the changes:</strong><br>
                    The task will automatically move to the new column and the status will be updated in the backend.
                </li>
            </ol>
        </div>
        
        <div class="section">
            <h2>ðŸ“Š Test Results</h2>
            
            <p>The drag-and-drop functionality has been thoroughly tested and verified to work correctly:</p>
            
            <ul class="feature-list">
                <li>âœ… Task creation with initial status</li>
                <li>âœ… Status updates via PUT requests</li>
                <li>âœ… Task movement between all column combinations</li>
                <li>âœ… Backend database updates</li>
                <li>âœ… UI refresh after status changes</li>
                <li>âœ… Error handling and user feedback</li>
            </ul>
            
            <p>Run the test script to verify:</p>
            <div class="code-block">python3 test_drag_drop.py</div>
        </div>
    </div>
    
    <script>
        // Add some interactivity to the demo
        document.addEventListener('DOMContentLoaded', function() {
            const tasks = document.querySelectorAll('.demo-task');
            const columns = document.querySelectorAll('.demo-column');
            
            let draggedTask = null;
            
            tasks.forEach(task => {
                task.addEventListener('dragstart', function(e) {
                    draggedTask = task;
                    task.classList.add('dragging');
                    e.dataTransfer.setData('text/plain', 'demo-task');
                    e.dataTransfer.effectAllowed = 'move';
                });
                
                task.addEventListener('dragend', function(e) {
                    task.classList.remove('dragging');
                    columns.forEach(col => col.classList.remove('drag-over'));
                });
            });
            
            columns.forEach(column => {
                column.addEventListener('dragover', function(e) {
                    e.preventDefault();
                    e.dataTransfer.dropEffect = 'move';
                    column.classList.add('drag-over');
                });
                
                column.addEventListener('dragleave', function(e) {
                    column.classList.remove('drag-over');
                });
                
                column.addEventListener('drop', function(e) {
                    e.preventDefault();
                    column.classList.remove('drag-over');
                    
                    if (draggedTask) {
                        column.querySelector('.demo-column-header').insertAdjacentElement('afterend', draggedTask);
                    }
                });
            });
        });
    </script>
</body>
</html>